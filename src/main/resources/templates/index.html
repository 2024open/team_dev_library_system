<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>名古屋図書館</title>
</head>

<body>
	<header th:replace="header"></header>

	<!--	<script>-->
	<!--		$(function () {-->
	<!--			$("#submit_item").change(function () {-->
	<!--				$("#submit_form").submit();-->
	<!--			});-->
	<!--		});-->
	<!--	</script>-->

	<form action="/lendItems" method="get">

		<input type="text" name="search">

		<!--		onchange="submit(this.form)"-->
		<select name="category">
			<option value="">カテゴリ</option>
			<option class="category" value="1">本</option>
			<option class="category" value="2">CD</option>
			<option class="category" value="3">DVD</option>
			<option class="category" value="4">紙芝居</option>
			<option class="category" value="5">貸会議室</option>
		</select>

		<select name="Possibility">
			<option value="0">貸出可否</option>
			<option value="1">貸出可</option>
			<option value="2">貸出不可</option>
		</select>

		<button>検索</button><br>
	</form>
	<h2 th:text="${titleMsg}"></h2>
	<h2 th:if="${category != 5 && lendItemList.size() == 0}" style="color: red;">検索結果が見つかりませんでした</h2>
	<table border="1" th:if="${category != 5 && lendItemList.size() >= 0}">
		<tr>
			<th>ジャンル</th>
			<th>タイトル</th>
			<th>著者</th>
			<th>貸出可否</th>
		</tr>
		<tr th:each="lendItem:${lendItemList}">
			<td th:text="${genreMap[lendItem.genreId]}"></td>
			<td><a th:href="@{/lendItems/{id}(id=${lendItem.lendItemId})}">
					<p th:text="${lendItem.title}"></p>
				</a></td>
			<td th:text="${lendItem.author}"></td>
			<td th:text="${statusMap[lendItem.statusId]}"></td>
		</tr>
	</table>
	<h2 th:if="${category == 5 && lendItemRoomList.size() == 0}" style="color: red;">検索結果が見つかりませんでした</h2>
	<table border="1" th:if="${category == 5 && lendItemRoomList.size() !=0}">
		<tr>
			<th>タイトル</th>
			<th>貸出可否</th>
		</tr>
		<tr th:each="lendItem:${lendItemRoomList}">
			<td><a th:href="@{/lendItems/{id}(id=${lendItem.lendItemId})}">
					<p th:text="${lendItem.roomName}"></p>
				</a></td>
			<td th:text="${statusMap[lendItem.statusId]}"></td>
		</tr>
	</table>
</body>

</html>