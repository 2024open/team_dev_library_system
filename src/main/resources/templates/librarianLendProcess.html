<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>貸出処理 返却処理</title>
<link rel="stylesheet" type="text/css" href="/css/style.css">
</head>
<body>
	<header th:replace ="adminHeader"></header>
	<sidebar th:replace="librarianSidebar"></sidebar>
	
	<h1>貸出処理</h1>
	
	<p th:if="${errorMsg}">[[${errorMsg}]]</p>
	
	<form action="/librarian/lendProcess" method="get">
		<input type="number" name="lendItemId">
		<button>ID検索</button>
	</form>
	
	<form action="/librarian/lendProcess" th:object="${category}" method="get">
		<select th:field="*{categoryId}">
			<option th:each="category : ${categoryList}" th:value="${category.categoryId}">[[${category.categoryName}]]</option>
		</select>
		<input type="text" name="keyword" th;value="${keyword}">
		
		<input type="hidden" name = "libraryId" th:value="${libraryId}">
		<button>キーワード検索</button>
	</form>
	
	<th:block th:if="${lendItem}">
		
		<form action="/librarian/lendProcess" method="post">
			<table border="1">
				<tr>
					<th>貸出物ID</th>
					<td>[[${lendItem.lendItemId}]]</td>
				</tr>
				<tr>
					<th>図書館ID</th>
					<td>[[${lendItem.libraryId}]]</td>
				</tr>
				<tr>
					<th>貸出物名</th>
					<td>[[${title}]]</td>
				</tr>
				<tr>
					<th>状態</th>
					<td>[[${lendItem.statusName}]]</td>
				</tr>
				<tr>
					<th>email</th>
					<td>
						<input type="text" name="email">
					</td>
				</tr>
			</table>
			
			<input type="hidden" name="lendItemId" th:value="${lendItem.lendItemId}">
			<input type="hidden" name="libraryId" th:value="${library.libraryId}">
			<input type="hidden" name="title" th:value="${title}">
			<button>貸出を確定する</button>
		</form>
	</th:block>
	
	<th:block th:if="${lendItemList}">
		<form action="/librarian/lendProcess" method="post" th:each="lendItem : ${lendItemList}">
			<table border="1" >
				<tr>
					<th>貸出物ID</th>
					<td>[[${lendItem.lendItemId}]]</td>
				</tr>
				<tr>
					<th>図書館ID</th>
					<td>[[${lendItem.libraryId}]]</td>
				</tr>
				<tr>
					<th>貸出物名</th>
					<td>[[${lendItem.title}]]</td>
				</tr>
				<tr>
					<th>状態</th>
					<td>[[${lendItem.statusName}]]</td>
				</tr>
				
			</table>
			
			<input type="hidden" name="lendItemId" th:value="${lendItem.lendItemId}">
			<input type="hidden" name="libraryId" th:value="${library.libraryId}">
			<input type="hidden" name="title" th:value="${lendItem.title}">
<!--			<input type="hidden" name="email" value="hogege">-->
			<button style="margin-bottom: 20px;">貸出する</button>
			
		</form>
		
	</th:block>
</body>
</html>